@startuml



skinparam monochrome true

title th_receiveFromMon \n



start

:serverOk ?;

while ()

  :msgRcv=monitor.Read();

    if (msgRcv.compareID(MESSAGE_MONITOR_LOST)) then (true)
        stop;
    else  (false)

        if(msgRcv.compareID(MESSAGE_ROBOT_COM_OPEN)) then (true)

            :openComRobot! ;

        else (false)

            if(msgRcv.compareID(MESSAGE_ROBOT_START_WITH_WD)) then (true)
                :startRobotWD! ;
            else (false)
                if(msgRcv.compareID(MESSAGE_ROBOT_START WITHOUT_WD)) then (true)
                    :startRobot!;
                else (false)
                    if(msgRcv.compareID(MESSAGE_ROBOT_CAM_OPEN)) then (true)
                        :ouvrirCamera! ;
                    else  (false)
                        if(msgRcv.compareID(MESSAGE_ROBOT_CAM_ASK_ARENA)) then (true)
                            :findArena! ;
                        else (false)
                            if(msgRcv.compareID(MESSAGE_ROBOT_CAM_ARENA_CONFIRM)) then (true)
                                :ArenaOK! ;
                            else (false)
                                if(msgRcv.compareID(MESSAGE_ROBOT_CAM_ARENA_INFIRM)) then (true)
                                    :ArenaKO! ;
                                else (false)
                                    if(msgRcv.compareID(MESSAGE_ROBOT_CAM_POSITION_COMPUTE_START)) then (true)
                                      :calculerPosition !;
                                    else (false)
                                        if(msgRcv.compareID(MESSAGE_ROBOT_CAM_POSITION_COMPUTE_STOP)) then (true)
                                            :stopCalculPosition! ;
                                        else (false)
                                            if(msgRcv.compareID(MESSAGE_ROBOT_GO_FORWARD
                                            ||msgRcv.compareID(MESSAGE_ROBOT_GO_BACKWARD
                                            ||msgRcv.compareID(MESSAGE_ROBOT_GO_LEFT
                                            ||msgRcv.compareID(MESSAGE_ROBOT_GO_RIGHT
                                            ||msgRcv.compareID(MESSAGE_ROBOT_STOP)) then (true)
                                                :move=msg.GetId();
                                            else (false)
                                            endif
                                        endif
                                    endif    
                                endif    
                            endif      
                        endif            
                    endif                   
                endif
            endif
                        

        endif

    endif
 

endwhile

stop



@enduml
                                                        
